# WP Travel Map

极简风格的WordPress旅行地图插件

**作者**: Dayu  
**网站**: https://anotherdayu.com/

## 功能特点

- 基于Mapbox的交互式地图
- 极简黑白灰设计风格
- 后台管理界面添加/编辑/删除地点
- 支持记录地点名称、描述、坐标和访问日期
- 通过短代码在任何页面显示地图
- 响应式设计
- **Excel导入导出功能**
  - 批量导出所有地点到Excel文件
  - 从Excel文件批量导入地点
  - 提供Excel模板下载
- **智能地点搜索**
  - 基于Mapbox地理编码的地点搜索
  - 支持中文地名搜索
  - 自动填充经纬度坐标
- **Mapbox令牌管理**
  - 插件设置页面管理令牌
  - 支持自定义地图样式
- **🔗 智能链接支持**
  - 描述中的URL自动转为可点击链接
  - 新窗口打开，安全防护
- **🗺️ 多投影支持**
  - 3D球形地图（默认）
  - 多种平面投影可选
  - 适配不同使用场景

## 安装使用

1. 将插件文件夹上传到 `/wp-content/plugins/` 目录
2. 在WordPress后台激活插件
3. 进入"旅行地图 > 设置"配置Mapbox访问令牌
4. 使用"旅行地图"菜单管理地点
5. 在页面或文章中使用短代码显示地图

## 短代码使用

```
[travel_map]
or
[travel_map height="600px"]
```

参数说明：
- `height`: 地图高度（默认500px）

**注意**：Mapbox访问令牌现在通过插件设置页面统一配置，无需在短代码中指定。

## Excel导入导出

### 导出功能
1. 进入"旅行地图"管理页面
2. 点击"导出 Excel"按钮
3. 所有地点数据将自动下载为Excel文件

### 导入功能
1. 准备Excel文件，包含以下列：
   - 地点名称（必填）
   - 描述（可选）
   - 纬度（必填）
   - 经度（必填）
   - 访问日期（可选，格式：YYYY-MM-DD）
2. 点击"导入 Excel"按钮选择文件
3. 确认导入数量后自动批量添加

### 模板下载
点击"下载模板"获取示例Excel文件格式

## 地点搜索功能

### 快速添加地点
1. 在管理页面的"快速搜索地点"框中输入地名
2. 点击"搜索"或按回车键
3. 从搜索结果中选择合适的地点
4. 系统自动填充地点名称和经纬度坐标
5. 补充描述和访问日期后保存
6. 大致改版：在描述中填入[[链接|标题]]格式，能够自动转换成超链接。

### 搜索示例
- 输入"北京"可以找到北京市
- 输入"东京塔"可以精确定位到东京塔
- 支持中英文地名搜索

## Mapbox配置

### 设置访问令牌
1. 访问 [Mapbox Account](https://account.mapbox.com/access-tokens/)
2. 创建新的访问令牌或使用现有令牌
3. 在"旅行地图 > 设置"页面粘贴你的令牌
4. 选择喜欢的地图样式
5. 保存设置
## 系统要求

- WordPress 5.0+
- PHP 7.0+
- MySQL 5.6+

## 许可证

GPL v2 or later